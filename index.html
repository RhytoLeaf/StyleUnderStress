<head>

    <!-- importing for Montserrat font family -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">


  <title>Style Under Skress</title>

  <link rel="icon" href="./images/logo-icon.png" type="image/png">


  <!-- Custom Style -->
  <style>
    body {
      min-width: 30%;

      /* RhytolLeaf Montserrat font */
      font-family: 'Montserrat', sans-serif !important;

      /* RhytoLeaf Soft black */
      color: 212121;


    }

    .progress-bar {
      transition: width 0.5s ease;
    }


    .card-img-top{
      height: 286px;
      width: 955px;
      
    }

    .container-xxl {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    
    header, h1, h2, p, a, button, .progress {
      text-align: center;
    }

    header{
        text-align: center;
    }

    #question-text{
        text-align: center;
    }

    .result-card{
    width: 18rem;
    }

    #result-card-container{
    }



    #begin-button{
        padding: 2rem;
        font-size: 33px;
    }

    #list-of-answers{
        display : none;

    }

    #true-button{
        background-color: rgb(0, 255, 251);
    }
    #false-button{
        background-color: rgb(255, 31, 102);
    }

    .container { 
        height: 200px;
        position: relative;
      }
      
      .vertical-center {
        margin: 0;
        position: absolute;
        top: 50%;
        -ms-transform: translateY(-50%);
        transform: translateY(-50%);
      }

      #question-grid {
        margin-bottom: 20px;
      }

      .grid-button {
        width: 40px;
        height: 40px;
        margin: 2px;
        border-radius: 50%;
        border: 1px solid #ccc;
        background-color: #f0f0f0;
        color: #333;
        font-weight: bold;
        cursor: pointer;
      }

      .grid-button.true {
        background-color: rgb(0, 255, 251);
        color: white;
      }

      .grid-button.false {
        background-color: rgb(255, 31, 102);
        color: white;
      }

      .modal {
        display: none; 
        position: fixed; 
        z-index: 1; 
        left: 0;
        top: 0;
        width: 100%; 
        height: 100%; 
        overflow: auto; 
        background-color: rgb(0,0,0); 
        background-color: rgba(0,0,0,0.4); 
      }

      .modal-content {
        background-color: #fefefe;
        margin: 15% auto; 
        padding: 20px;
        border: 1px solid #888;
        width: 80%; 
      }

      .close-button {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
      }

      .close-button:hover,
      .close-button:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
      }
    body.dark-mode {
      background-color: #212121 !important;
      color: #f2f2f2 !important;
    }

    body.dark-mode .card {
      background-color: #333333 !important;
      color: #f2f2f2 !important;
    }

    body.dark-mode h1, body.dark-mode h2, body.dark-mode p, body.dark-mode a, body.dark-mode button {
      color: #f2f2f2 !important;
    }

    body.dark-mode .grid-button {
      background-color: #555555 !important;
      color: #f2f2f2 !important;
      border: 1px solid #777777 !important;
    }

    body.dark-mode .grid-button.true {
      background-color: rgb(0, 150, 147) !important;
    }

    body.dark-mode .grid-button.false {
      background-color: rgb(150, 20, 60) !important;
    }

    body.dark-mode .modal-content {
      background-color: #333333 !important;
      color: #f2f2f2 !important;
      border: 1px solid #555555 !important;
    }

    body.dark-mode .close-button {
      color: #f2f2f2 !important;
    }
    #darkModeIcon {
      font-size: 2em; /* Double the size */
    }
    .form-check-input:checked {
      background-color: darkblue !important;
      border-color: darkblue !important;
    }

    .form-check-input:not(:checked) {
      background-color: orange !important;
      border-color: orange !important;
    }
  </style>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous" />



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />





</head>






<!-- 
  
  To learn with the intention to succeed

 -->

<body class="bg-success justify-content-center">

  <div class="container-xxl">
    <!-- TITLE -->
    <header>


    </header>

    <!-- MAIN HEADER FOR QUIZ -->
    <h1 style="padding: 2.2rem;">Style Under Skress</h1>

    <div id="question-grid" class="d-flex flex-wrap justify-content-center"></div>

    <div class="d-flex flex-column align-items-center my-3">
      <i id="darkModeIcon" class="fas fa-moon mb-2"></i>
      <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" id="darkModeToggle">
        <label class="form-check-label" for="darkModeToggle"></label>
      </div>
    </div>





    <!-- QUIZ PANEL -->
    <div class="col-xl-8">
      <br />

      <!--  -->
      <hr id="question-hr" style="display: none;">
      <h2 id="question-number" class="bd-title"></h2>


      <br><br><br><br>


      <div class="card" style="background-color:#F2F2F2; padding: 2rem;">


        <!-- QUESTION TEXT  -->
        <p id="question-text">
          Welcome! <br>Please press "Begin" to start the quiz.
          <br>
          (33 Questions)
        </p>

      </div>


      <br>

      <div class="container-xxl bd-gutter">
        <div class="row">

          <!-- ANSWER BOARD (TRUE OR FALSE) -->
          <div class="d-flex flex-column flex-md-row gap-3">

            <a class="btn btn-lg bd-btn-lg" id="true-button" style="display: none" onclick="pressTrue()">
              True
            </a>

            <a class="btn btn-lg bd-btn-lg" id="false-button" style="display: none" onclick="pressFalse()">
              False
            </a>
          </div>

        </div>

        <div class="col-xl-4 d-lg-flex justify-content-xl-end">
          <script async="" src="https://cdn.carbonads.com/carbon.js?serve=CKYIKKJL&amp;placement=getbootstrapcom"
            id="_carbonads_js"></script>
        </div>
      </div>
    </div>

    <div class="text-center" style="margin-top: 20px;">
      <button id="scroll-to-results" class="btn btn-primary rounded-circle" style="width: 50px; height: 50px; padding: 10px 16px; font-size: 18px; line-height: 1.33; display: none;">
        &#8595;
      </button>
    </div>



    <br>

    <!---------------------------------------------- 
    BEGIN

    BUTTON 
    ------------------------------------------------>
    <div class="container my-3">
      <div class="col-md-12 text-center">
        <button id="begin-button" onclick="startQuiz()" class="bg-danger btn">
          Begin
        </button>
      </div>
    </div>


    <!-- QUESTIONS DISPLAY HERE -->
    <div id="question-board" style="width: 50%; ">

      <br />

    </div>




    <!-------------------------------------------------->
    <!-------------------------------------------------->
    <!-- LIST OF ANSWERED TRUE (MEANT FOR DEBUGGING) -->
    <div id="list-of-answers">
      <h4>Answered True</h4>
      <p id="answered-true">[ ]</p>
    </div>


    <!-- QUIZ PROGRESS BAR-->
    <div class="progress" style="width: 60%; height:30px" role="progressbar" aria-label="Basic example"
      aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
      <div id="quiz-progress" class="progress-bar" style="background-color:#00CE7C;"></div>
    </div>




    <br><br><br>

    <!-------------------------------------------------->
    <!-------------------------------------------------->
    <!-------------------- RESULTS --------------------->
    <div id="result-card-container" style="display:none " class="text-center">


      <!-- Explaining results -->
      <h2 id="results-header">Results</h2>

      <p>
        Your silence and violence scores give you a measure of <br>
        how frequently you fall into these less-than-perfect strategies.
      </p>

      <p>These scores represent how you may typically behave during stressful or crucial conversations, but they can
        change.</p>

      <br><br>
      <b class="text-center" style="color: red;">Your score DOES NOT represent an inalterable character trait or a genetic propensity.</b>
      <p>It's merely a measure of your behavior and you can change that.</p>

      <br><br>




      <!-- Boostrap row object that will contain 2 col-sm objects -->
      <div class=" row">




        <br>
        <br>


        <!---------------------- SILENCE ----------------------->
        <div class="col-sm text-center d-flex flex-column align-items-center">
          <h3>Silence</h3>
          <div class="card result-card flex-grow-1 mr-2">


            <!-- Thumbnail image -->
            <img class="card-img-top" src="./images/silence.png" alt="Card image cap">
            <div class="card-body">

              <!-- Masking -->
              <div id="masking-div">
                <p>Masking <i class="fas fa-info-circle info-icon" data-category="masking"></i></p>
                <input type="checkbox" id="q-5" name="" value="">
                <input type="checkbox" id="q-6" name="" value="">
                <p id="masking-pct">0%</p>
              </div>
              <hr>



              <!-- Avoiding -->
              <div id="avoiding-div">
                <p>Avoiding <i class="fas fa-info-circle info-icon" data-category="avoiding"></i></p>
                <input type="checkbox" id="q-3" name="" value="">
                <input type="checkbox" id="q-4" name="" value="">
                <p id="avoiding-pct">0%</p>
              </div>
              <hr>



              <!-- Withdrawing -->
              <div id="withdrawing-div">
                <p>Withdrawing <i class="fas fa-info-circle info-icon" data-category="withdrawing"></i></p>
                <input type="checkbox" id="q-1" name="" value="">
                <input type="checkbox" id="q-2" name="" value="">
                <p id="withdrawing-pct">0%</p>
              </div>
              <hr>



              <!-- start w the heart -->
              <div id="heart-div">
                <p>Start with the heart <i class="fas fa-info-circle info-icon" data-category="heart"></i></p>
                <input type="checkbox" id="q-13" name="" value="">
                <input type="checkbox" id="q-19" name="" value="">
                <input type="checkbox" id="q-25" name="" value="">
                <p id="heart-pct">0%</p>
              </div>
              <hr>



              <!-- Learn to look -->
              <div id="look-div">
                <p>Learn to look <i class="fas fa-info-circle info-icon" data-category="look"></i></p>
                <input type="checkbox" id="q-14" name="" value="">
                <input type="checkbox" id="q-20" name="" value="">
                <input type="checkbox" id="q-26" name="" value="">
                <p id="look-pct">0%</p>
              </div>
              <hr>



              <!-- Make it safe -->
              <div id="safe-div">
                <p>Make it safe <i class="fas fa-info-circle info-icon" data-category="safe"></i></p>
                <input type="checkbox" id="q-15" name="" value="">
                <input type="checkbox" id="q-21" name="" value="">
                <input type="checkbox" id="q-27" name="" value="">
                <p id="safe-pct">0%</p>
              </div>
              <hr>



              <!-- Master my stories -->
              <div id="stories-div">
                <p>Master my stories <i class="fas fa-info-circle info-icon" data-category="stories"></i></p>
                <input type="checkbox" id="q-16" name="" value="">
                <input type="checkbox" id="q-22" name="" value="">
                <input type="checkbox" id="q-28" name="" value="">
                <p id="stories-pct">0%</p>
              </div>

            </div>

          </div>

        </div>


        <!----------------- VIOLENCE ------------------->
        <div class="col-sm text-center d-flex flex-column align-items-center">
          <h3>Violence</h3>

          <div class="card result-card flex-grow-1 ml-2">

            <!-- Thumbnail image -->
            <img class="card-img-top" src="./images/violence.png" alt="Card image cap">
            <div class="card-body">

              <!-- Controlling -->
              <div id="controlling-div">
                <p>Controlling <i class="fas fa-info-circle info-icon" data-category="controlling"></i></p>
                <input type="checkbox" id="q-7" name="" value="">
                <input type="checkbox" id="q-8" name="" value="">
                <p id="controlling-pct">0%</p>
              </div>

              <hr>


              <!-- Labeling -->
              <div id="labeling-div">
                <p>Labeling <i class="fas fa-info-circle info-icon" data-category="labeling"></i></p>
                <input type="checkbox" id="q-9" name="" value="">
                <input type="checkbox" id="q-10" name="" value="">
                <p id="labeling-pct">0%</p>
              </div>

              <hr>


              <!-- Attacking -->
              <div id="attacking-div">
                <p>Attacking <i class="fas fa-info-circle info-icon" data-category="attacking"></i></p>
                <input type="checkbox" id="q-11" name="" value="">
                <input type="checkbox" id="q-12" name="" value="">
                <p id="attacking-pct">0%</p>
              </div>

              <hr>


              <!-- STATE my path -->
              <div id="state-div">
                <p>STATE my path <i class="fas fa-info-circle info-icon" data-category="state"></i></p>
                <input type="checkbox" id="q-17" name="" value="">
                <input type="checkbox" id="q-23" name="" value="">
                <input type="checkbox" id="q-29" name="" value="">
                <p id="state-pct">0%</p>
              </div>

              <hr>


              <!-- Explore Others' Paths -->
              <div id="explore-div">
                <p>Explore Others' Paths <i class="fas fa-info-circle info-icon" data-category="explore"></i></p>
                <input type="checkbox" id="q-18" name="" value="">
                <input type="checkbox" id="q-24" name="" value="">
                <input type="checkbox" id="q-30" name="" value="">
                <p id="explore-pct">0%</p>
              </div>

              <hr>

              <!-- Move to action -->
              <div id="action-div">
                <p>Move to action <i class="fas fa-info-circle info-icon" data-category="action"></i></p>
                <div class="justify-content-center">
                  <input type="checkbox" id="q-31" name="" value="">
                  <input type="checkbox" id="q-32" name="" value="">
                  <input type="checkbox" id="q-33" name="" value="">
                  <p id="action-pct">0%</p>
                </div>
              </div>

              <br><br><br><br><br>

            </div>



          </div>
        </div>







      </div>

      <br><br><br><br>

     




      <div id="conclusion">

        <p>Save and/or share results:</p>
        <button id="copy-results" class="btn btn-primary"><i class="fas fa-copy"></i> Copy</button>

        <br><br>

        <p>We have a tool that can help you:</p>
        <p><a href="https://www.amazon.ca/Crucial-Conversations-Talking-Stakes-Second/dp/0071771328">Crucial
            Conversations</a></p>


       <!------------------------------------>
      <!------------------------------------>
      <!------------------------------------>
      <!-- FEATURE TO BE RELEASED 
       
      <div class="row">

        <h3>
          Share Results with someone you want to connect with
        </h3>

      </div>
    -->
      <!------------------------------------>
      <!------------------------------------>
      <!------------------------------------>


      </div>
      <!-- END -->



    </div>









    <div id="info-modal" class="modal">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <h2 id="modal-title"></h2>
        <p id="modal-description"></p>
        <h3>Common Logical Fallacies:</h3>
        <ul id="modal-fallacies"></ul>
      </div>
    </div>

</body>


<!-- Jquery library to make things simpler -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Quiz script -->
<script src='./questions.js'></script>
<script>
  document.getElementById("scroll-to-results").addEventListener("click", function() {
    document.getElementById("results-header").scrollIntoView({ behavior: 'smooth' });
  });
</script>

<script>
  document.getElementById("copy-results").addEventListener("click", function() {
    let resultsText = "Style Under Stress Test Results\n\n";
    resultsText += "***Your score DOES NOT represent an inalterable character trait or a genetic propensity. It's merely a measure of your behavior and you can change that.***\n\n";
    
    // Silence Categories
    resultsText += "--- SILENCE ---\n\n";
    resultsText += "Masking: " + document.getElementById("masking-pct").textContent + "\n";
    resultsText += categoryInfo.masking.description + "\n";
    if (categoryInfo.masking.fallacies.length > 0) {
      resultsText += "Common Logical Fallacies: " + categoryInfo.masking.fallacies.join(", ") + "\n";
    }
    resultsText += "\n";

    resultsText += "Avoiding: " + document.getElementById("avoiding-pct").textContent + "\n";
    resultsText += categoryInfo.avoiding.description + "\n";
    if (categoryInfo.avoiding.fallacies.length > 0) {
      resultsText += "Common Logical Fallacies: " + categoryInfo.avoiding.fallacies.join(", ") + "\n";
    }
    resultsText += "\n";

    resultsText += "Withdrawing: " + document.getElementById("withdrawing-pct").textContent + "\n";
    resultsText += categoryInfo.withdrawing.description + "\n";
    if (categoryInfo.withdrawing.fallacies.length > 0) {
      resultsText += "Common Logical Fallacies: " + categoryInfo.withdrawing.fallacies.join(", ") + "\n";
    }
    resultsText += "\n";

    // Violence Categories
    resultsText += "--- VIOLENCE ---\n\n";
    resultsText += "Controlling: " + document.getElementById("controlling-pct").textContent + "\n";
    resultsText += categoryInfo.controlling.description + "\n";
    if (categoryInfo.controlling.fallacies.length > 0) {
      resultsText += "Common Logical Fallacies: " + categoryInfo.controlling.fallacies.join(", ") + "\n";
    }
    resultsText += "\n";

    resultsText += "Labeling: " + document.getElementById("labeling-pct").textContent + "\n";
    resultsText += categoryInfo.labeling.description + "\n";
    if (categoryInfo.labeling.fallacies.length > 0) {
      resultsText += "Common Logical Fallacies: " + categoryInfo.labeling.fallacies.join(", ") + "\n";
    }
    resultsText += "\n";

    resultsText += "Attacking: " + document.getElementById("attacking-pct").textContent + "\n";
    resultsText += categoryInfo.attacking.description + "\n";
    if (categoryInfo.attacking.fallacies.length > 0) {
      resultsText += "Common Logical Fallacies: " + categoryInfo.attacking.fallacies.join(", ") + "\n";
    }
    resultsText += "\n";

    // Healthy Communication Categories
    resultsText += "--- HEALTHY COMMUNICATION ---\n\n";
    resultsText += "Start with the heart: " + document.getElementById("heart-pct").textContent + "\n";
    resultsText += categoryInfo.heart.description + "\n\n";

    resultsText += "Learn to look: " + document.getElementById("look-pct").textContent + "\n";
    resultsText += categoryInfo.look.description + "\n\n";

    resultsText += "Make it safe: " + document.getElementById("safe-pct").textContent + "\n";
    resultsText += categoryInfo.safe.description + "\n\n";

    resultsText += "Master my stories: " + document.getElementById("stories-pct").textContent + "\n";
    resultsText += categoryInfo.stories.description + "\n\n";

    resultsText += "STATE my path: " + document.getElementById("state-pct").textContent + "\n";
    resultsText += categoryInfo.state.description + "\n\n";

    resultsText += "Explore Others' Paths: " + document.getElementById("explore-pct").textContent + "\n";
    resultsText += categoryInfo.explore.description + "\n\n";

    resultsText += "Move to action: " + document.getElementById("action-pct").textContent + "\n";
    resultsText += categoryInfo.action.description + "\n\n";

    navigator.clipboard.writeText(resultsText).then(function() {
      alert("Results copied to clipboard!");
    }, function(err) {
      alert("Could not copy results to clipboard.");
    });
  });
</script>

  <footer>
    <p>Inspired by Crucial Conversation's various authors</p>
    <br>
    <p>&copy; <span id="current-year"></span> RhytoLeaf Inc. All Rights Reserved</p>
  </footer>

<script>
  document.getElementById("current-year").textContent = new Date().getFullYear();
</script>

<script>
  const fallacyDescriptions = {
    "Straw Man": "Misrepresenting or exaggerating an opponent's argument to make it easier to attack.",
    "Equivocation": "Using a word or phrase with multiple meanings to mislead or create confusion.",
    "Red Herring": "Introducing an irrelevant topic into an argument to divert attention from the main issue.",
    "Changing the Subject": "Similar to a red herring, this is a deliberate shift of the discussion to a different topic to avoid the original point.",
    "Appeal to Emotion (Silence)": "Using emotional appeals to avoid addressing the issue at hand.",
    "Argument from Ignorance": "Claiming something is true because it hasn't been proven false, or vice versa.",
    "Appeal to Force": "Using threats, coercion, or intimidation to force acceptance of an argument.",
    "Ad Hominem": "Attacking the person making the argument rather than the argument itself.",
    "Genetic Fallacy": "Dismissing or validating an argument based on its source or origin, rather than its content.",
    "Appeal to Spite": "Using spite or ill will to support or reject a claim, rather than logic."
  };

  const categoryInfo = {
    masking: {
      title: "Masking (Silence)",
      description: "Understating or selectively showing your true opinions. Sarcasm, sugarcoating, and couching are common forms of masking.",
      fallacies: ["Straw Man", "Equivocation"]
    },
    avoiding: {
      title: "Avoiding (Silence)",
      description: "Steering completely away from sensitive subjects. You talk, but without addressing the real issues.",
      fallacies: ["Red Herring", "Changing the Subject"]
    },
    withdrawing: {
      title: "Withdrawing (Silence)",
      description: "Pulling out of a conversation completely. You either exit the conversation or exit the room.",
      fallacies: ["Appeal to Emotion (Silence)", "Argument from Ignorance"]
    },
    heart: {
      title: "Start with the Heart",
      description: "This is a healthy communication skill. It means staying focused on what you really want, and not getting sidetracked by wanting to win, punish, or keep the peace.",
      fallacies: []
    },
    look: {
      title: "Learn to Look",
      description: "This is a healthy communication skill. It means paying attention to when a conversation becomes crucial, and recognizing when safety is at risk.",
      fallacies: []
    },
    safe: {
      title: "Make it Safe",
      description: "This is a healthy communication skill. It means creating an environment of mutual respect and purpose where everyone feels comfortable contributing.",
      fallacies: []
    },
    stories: {
      title: "Master My Stories",
      description: "This is a healthy communication skill. It means managing your own emotions and the narratives you create about others.",
      fallacies: []
    },
    controlling: {
      title: "Controlling (Violence)",
      description: "Coercing others to your way of thinking. You might do this by either forcing your views on others or dominating the conversation.",
      fallacies: ["Appeal to Force", "Ad Hominem"]
    },
  labeling: {
      title: "Labeling (Violence)",
      description: "Dismissing someone by attaching a label to them. This is a way of stereotyping or categorizing people so you can dismiss them.",
      fallacies: ["Ad Hominem", "Genetic Fallacy"]
    },
    attacking: {
      title: "Attacking (Violence)",
      description: "You move from winning the argument to making the other person suffer. Tactics include belittling and threatening.",
      fallacies: ["Ad Hominem", "Appeal to Spite"]
    },
    state: {
      title: "STATE My Path",
      description: "This is a healthy communication skill. It's a set of skills for sharing your views, even when they are controversial or unpopular.",
      fallacies: []
    },
    explore: {
      title: "Explore Others' Paths",
      description: "This is a healthy communication skill. It means actively listening to and understanding others' perspectives.",
      fallacies: []
    },
  action: {
      title: "Move to Action",
      description: "This is a healthy communication skill. It means translating discussions into clear decisions and commitments.",
      fallacies: []
    }
  };

  const modal = document.getElementById("info-modal");
  const modalTitle = document.getElementById("modal-title");
  const modalDescription = document.getElementById("modal-description");
  const modalFallacies = document.getElementById("modal-fallacies");
  const closeButton = document.querySelector(".close-button");

  document.querySelectorAll(".info-icon").forEach(icon => {
    icon.addEventListener("click", function() {
      const category = this.dataset.category;
      const info = categoryInfo[category];

      modalTitle.textContent = info.title;
      modalDescription.textContent = info.description;
      
      modalFallacies.innerHTML = "";
      if (info.fallacies.length === 0) {
        const li = document.createElement("li");
        li.textContent = "None";
        modalFallacies.appendChild(li);
      } else {
        info.fallacies.forEach(fallacy => {
          const li = document.createElement("li");
          li.innerHTML = `<b>${fallacy}:</b> ${fallacyDescriptions[fallacy]}`;
          modalFallacies.appendChild(li);
        });
      }

      modal.style.display = "block";
    });
  });

  closeButton.addEventListener("click", function() {
    modal.style.display = "none";
  });

  window.addEventListener("click", function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  });
</script>

<script>
  const darkModeToggle = document.getElementById('darkModeToggle');
  const body = document.body;
  const darkModeIcon = document.getElementById('darkModeIcon');

  // Function to set the icon based on dark mode state
  function setDarkModeIcon() {
    if (body.classList.contains('dark-mode')) {
      darkModeIcon.classList.remove('fa-moon');
      darkModeIcon.classList.add('fa-sun');
    } else {
      darkModeIcon.classList.remove('fa-sun');
      darkModeIcon.classList.add('fa-moon');
    }
  }

  // Check for user's preferred mode in localStorage
  if (localStorage.getItem('darkMode') === 'enabled') {
    body.classList.add('dark-mode');
    darkModeToggle.checked = true;
  }
  setDarkModeIcon(); // Set initial icon

  darkModeToggle.addEventListener('change', () => {
    if (darkModeToggle.checked) {
      body.classList.add('dark-mode');
      localStorage.setItem('darkMode', 'enabled');
    } else {
      body.classList.remove('dark-mode');
      localStorage.setItem('darkMode', 'disabled');
    }
    setDarkModeIcon(); // Update icon after change
  });
</script>